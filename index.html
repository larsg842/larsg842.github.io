<!doctype html>
<html lang="de">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>PersÃ¶nliche Startseite â€” Lars G.</title>

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <!-- Cesium Widgets CSS -->
    <link href="https://cesium.com/downloads/cesiumjs/releases/1.125/Build/Cesium/Widgets/widgets.css" rel="stylesheet" />

    <style>
        :root{
            --bg:#ffffff;
            --text:#0b1220;
            --muted:#46515b;
            --accent:#20b581ff;
            --card:#f7f9fb;
            --radius:12px;
            --card-shadow: 0 14px 32px rgba(32,181,129,0.08);
            --max-width:1000px;
            --gap:1.5rem;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, system-ui, sans-serif;
            color-scheme: light;
        }

        /* Nachtmodus-Variablen */
        .dark{
            --bg:#0b1220;
            --text:#e6eef6;
            --muted:#98a9b8;
            --accent:#2ad48bff;
            --card:#0f1620;
            --card-shadow: 0 14px 36px rgba(0,0,0,0.6);
            color-scheme: dark;
        }

        /* sanfte ÃœbergÃ¤nge bei Farbwechsel */
        html, body, .card, table, .card-content, header, footer {
            transition: background-color .24s ease, color .24s ease, box-shadow .24s ease;
        }

        html,body{
            height:100%;
            margin:0;
            background:var(--bg);
            color:var(--text);
            -webkit-font-smoothing:antialiased;
            -moz-osx-font-smoothing:grayscale;
            line-height:1.6;
        }

        .wrap{
            max-width:var(--max-width);
            margin:3rem auto;
            padding:1rem;
            box-sizing:border-box;
        }

        header{
            display:block;
            margin-bottom:2.25rem;
            text-align:left;
            position:relative; /* erlaubt Positionierung des Toggle-Buttons */
        }

        h1{
            margin:0 0 .6rem 0;
            font-size:clamp(1.4rem, 2.6vw, 2rem);
            line-height:1.05;
        }

        .lead{
            margin:0 0 .75rem 0;
            color:var(--muted);
            font-size:1rem;
        }

        main{
            display:grid;
            gap:var(--gap);
        }

        section.timeline{
            background:linear-gradient(180deg, rgba(32,181,129,0.03), transparent);
            padding:1rem;
            border-radius:var(--radius);
        }

        .table-wrap{
            overflow:auto;
            border-radius:8px;
            box-shadow:0 1px 0 rgba(0,0,0,0.04) inset;
            margin-top:.9rem;
        }

        table{ width:100%; border-collapse:collapse; min-width:640px; }
        caption{ text-align:left; font-size:.95rem; font-weight:600; margin-bottom:.45rem; color:var(--text); }
        thead th{ text-align:left; font-size:.9rem; padding:.75rem; background:transparent; color:var(--muted); border-bottom:2px solid rgba(32,181,129,0.08); }
        tbody td{ padding:.85rem; border-bottom:1px solid rgba(15,20,25,0.04); font-size:.97rem; line-height:1.5; }

        section.gallery{ padding:0; }

        .cards{ display:grid; gap:var(--gap); grid-template-columns:repeat(1,1fr); margin-top:.9rem; }

        .card{ display:flex; flex-direction:column; background:var(--card); border-radius:var(--radius); overflow:hidden; text-decoration:none; color:inherit; transition:transform .18s ease, box-shadow .18s ease; min-height:180px; box-shadow:var(--card-shadow); border:1px solid rgba(10,20,30,0.03); }
        .card:focus, .card:hover{ transform:translateY(-8px); box-shadow:0 28px 56px rgba(32,181,129,0.12); outline:3px solid rgba(32,181,129,0.12); }
        .card-content{ padding: 1rem; }
        .card h3{ margin:0 0 .45rem 0; font-size:1rem; }
        .card p{ margin:0; color:var(--muted); font-size:.95rem; line-height:1.45; }

        footer{ margin-top:1.5rem; font-size:.9rem; color:var(--muted); }

        /* Karte-spezifisch */
        .map-card .map { width:100%; height:200px; }
        /* Eingebettete Reise-Karten (iframes) */
        .map-frame { width:100%; height:260px; border:0; border-radius:8px; }
        @media (min-width:920px){ .map-frame { height:200px; } }

        /* Tabs */
        .tabs { margin: 1rem 0 0 0; position:relative; z-index:99999; pointer-events:auto; /* Ensure tabs are above any WebGL overlay (Cesium) */ }
        .tablist { display:flex; gap:.5rem; align-items:center; flex-wrap:wrap; }
        .tab { background:var(--card); color:var(--text); border:1px solid rgba(10,20,30,0.06); padding:.45rem .75rem; border-radius:10px; cursor:pointer; font-size:.95rem; pointer-events:auto; position:relative; z-index:100000; }
        .tab[aria-selected="true"] { box-shadow: 0 8px 20px rgba(32,181,129,0.08); outline:3px solid rgba(32,181,129,0.08); }
        .tabpanel { margin-top:.75rem; padding:1rem; background:var(--card); border-radius:12px; box-shadow:var(--card-shadow); }

        a:focus{ outline:3px dashed rgba(32,181,129,0.18); outline-offset:3px; }

        /* Theme-Toggle Button */
        .theme-toggle{ position:absolute; top:0.15rem; right:0; background:transparent; border:1px solid rgba(10,20,30,0.06); background-color:var(--card); color:var(--text); padding:.35rem .6rem; border-radius:10px; cursor:pointer; font-size:.9rem; display:inline-flex; gap:.5rem; align-items:center; }
        .theme-toggle:focus{ outline:3px solid rgba(32,181,129,0.12); outline-offset:3px; }
        .theme-toggle[data-mode="dark"]{ box-shadow:0 6px 18px rgba(0,0,0,0.35); border-color:rgba(255,255,255,0.06); }

        /* Cesium Container (innerhalb einer Karte) */
        .cesium-container { width:100%; height:400px; border-radius:8px; overflow:hidden; position:relative; z-index:1; }

        @media (min-width:721px){ .cards{ grid-template-columns:repeat(2,1fr); } }
        @media (min-width:920px){ .cards{ grid-template-columns:repeat(3,1fr); } main{ gap:1.75rem; } }

        /* Kontakt-Ecke (rechts unten) */
        .contact-cta {
            position: fixed;
            right: 1rem;
            bottom: 1rem;
            display: flex;
            gap: .5rem;
            z-index: 1200;
            /* Container soll keine Pointer-Events abfangen, nur die Buttons selbst */
            pointer-events: none;
        }
        .contact-btn {
            display:inline-flex;
            align-items:center;
            justify-content:center;
            width:44px;
            height:44px;
            border-radius:10px;
            background:var(--card);
            color:var(--text);
            border:1px solid rgba(10,20,30,0.06);
            box-shadow:var(--card-shadow);
            text-decoration:none;
            /* Buttons mÃ¼ssen Pointer-Events haben, damit sie klickbar bleiben */
            pointer-events: auto;
        }
        /* Optionale Stilklasse fÃ¼r klickbare Karten */
        .card.clickable { cursor: pointer; }
        .contact-btn svg { width:20px; height:20px; display:block; fill:currentColor; }
        .contact-btn:focus, .contact-btn:hover { transform:translateY(-4px); box-shadow:0 18px 36px rgba(32,181,129,0.12); outline:3px solid rgba(32,181,129,0.08); }
    </style>
</head>
<body>
    <div class="wrap">
        <header>
            <h1>Lars GrasmÃ¼ck â€” Geoinformatik &amp; Vermessung</h1>
            <p class="lead">Kurzprofil: Ich absolviere ein Duales Studium der Geoinformatik und Vermessung in Frankfurt und Mainz.</p>

            <!-- Theme Toggle Button -->
            <button class="theme-toggle" id="theme-toggle" aria-label="Design umschalten" data-mode="light" title="Design umschalten" aria-pressed="false">ðŸŒ™ Dunkel</button>
        </header>

        <!-- Statisches, zugÃ¤ngliches Tab-Interface -->
        <div class="tabs" aria-hidden="false">
            <div role="tablist" aria-label="Hauptbereiche" class="tablist">
                <button class="tab" role="tab" id="tab-about-btn" aria-controls="tab-about" aria-selected="true" data-index="0">About</button>
                <button class="tab" role="tab" id="tab-maps-btn" aria-controls="tab-maps" aria-selected="false" data-index="1">Maps</button>
                <button class="tab" role="tab" id="tab-travel-btn" aria-controls="tab-travel" aria-selected="false" data-index="2">Reisen</button>
                <button class="tab" role="tab" id="tab-news-btn" aria-controls="tab-news" aria-selected="false" data-index="3">News</button>
                <button class="tab" role="tab" id="tab-projects-btn" aria-controls="tab-projects" aria-selected="false" data-index="4">Projects</button>
            </div>
        </div>

        <main>
            <section id="tab-about" class="tabpanel" role="tabpanel" aria-labelledby="tab-about-btn">
                <section class="timeline" aria-labelledby="timeline-title">
                    <h2 id="timeline-title" style="margin:0;font-size:1rem;">Stationen</h2>
                    <div class="table-wrap" role="region" aria-label="Berufliche Stationen" style="margin-top:.6rem;">
                        <table>
                            <caption>Meine Stationen</caption>
                            <thead>
                                <tr>
                                    <th scope="col">Jahr</th>
                                    <th scope="col">Station</th>
                                    <th scope="col">Ort</th>
                                    <th scope="col">Stichwort</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>2023â€“heute</td>
                                    <td>Studium</td>
                                    <td>Mainz</td>
                                    <td>Geoinformatik und Vermessung</td>
                                </tr>
                                <tr>
                                    <td>2023â€“heute</td>
                                    <td>Duales Studium</td>
                                    <td>Frankfurt</td>
                                    <td>Datenmanagement</td>
                                </tr>
                                <tr>
                                    <td>2014â€“2023</td>
                                    <td>Schule</td>
                                    <td>Hanau</td>
                                    <td></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Karten wurden in das separate 'Maps'-Tab verschoben -->
                 </section>
             </section>

            <!-- Neues Maps-Tab mit vorhandenen Karten -->
            <section id="tab-maps" class="tabpanel" role="tabpanel" aria-labelledby="tab-maps-btn" hidden>
                <div class="timeline" style="padding:1rem;">
                    <h2 style="margin:0;font-size:1rem;">Maps</h2>
                    <div class="cards" style="margin-top:1rem;">
                        <article class="card map-card" role="group" aria-labelledby="map-mainz-title">
                            <div id="map-mainz" class="map" aria-label="Karte Mainz"></div>
                            <div class="card-content">
                                <h3 id="map-mainz-title">Mainz</h3>
                                <p>Standort: Mainz â€” Studium (Geoinformatik &amp; Vermessung)</p>
                            </div>
                        </article>

                        <article class="card map-card" role="group" aria-labelledby="map-frankfurt-title">
                            <div id="map-frankfurt" class="map" aria-label="Karte Frankfurt"></div>
                            <div class="card-content">
                                <h3 id="map-frankfurt-title">Frankfurt</h3>
                                <p>Standort: Frankfurt â€” Duales Studium / Datenmanagement</p>
                            </div>
                        </article>

                        <article class="card map-card" role="group" aria-labelledby="map-hanau-title">
                            <div id="map-hanau" class="map" aria-label="Karte Hanau"></div>
                            <div class="card-content">
                                <h3 id="map-hanau-title">Hanau</h3>
                                <p>Standort: Hanau â€” Schule</p>
                            </div>
                        </article>

                        <!-- Cesium 3D-Viewer Card -->
                        <article class="card" role="group" aria-labelledby="cesium-title">
                            <div style="padding:0;">
                                <div id="cesiumContainer" class="cesium-container" aria-label="3D Karte"></div>
                            </div>
                            <div class="card-content">
                                <h3 id="cesium-title">3D-GebÃ¤ude (LoD2)</h3>
                                <p style="margin:0;color:var(--muted);">3D-Visualisierung mit Cesium â€” LoD2 GebÃ¤udedaten.</p>
                            </div>
                        </article>
                    </div>
                </div>
            </section>

            <!-- Neues Reisen-Tab mit eingebetteten Map-Dateien (map_1.html ... map_4.html) -->
            <section id="tab-travel" class="tabpanel" role="tabpanel" aria-labelledby="tab-travel-btn" hidden>
                <div class="timeline" style="padding:1rem;">
                    <h2 style="margin:0;font-size:1rem;">Reisen</h2>
                    <div class="cards" style="margin-top:1rem;">
                        <article class="card" role="group" aria-labelledby="map1-title">
                            <div style="padding:0;">
                                <iframe class="map-frame" src="map_1.html" title="Reise-Karte 1" aria-label="Reise-Karte 1"></iframe>
                            </div>
                            <div class="card-content">
                                <h3 id="map1-title">Basiskarte</h3>
                                <p style="margin:0;color:var(--muted);">Beschreibung zur Basiskarte.</p>
                            </div>
                        </article>

                        <article class="card" role="group" aria-labelledby="map2-title">
                            <div style="padding:0;">
                                <iframe class="map-frame" src="map_2.html" title="Reise-Karte 2" aria-label="Reise-Karte 2"></iframe>
                            </div>
                            <div class="card-content">
                                <h3 id="map2-title">letzte besuchte Orte</h3>
                                <p style="margin:0;color:var(--muted);">Letzte besuchte Orte (verlauf).</p>
                            </div>
                        </article>

                        <article class="card" role="group" aria-labelledby="map3-title">
                            <div style="padding:0;">
                                <!-- Standard-Zentrum: Norditalien (Lat ~45.5, Lng ~10.5), Zoom ~8 -->
                                <iframe class="map-frame" src="map_3.html#lat=45.5&lng=10.5&zoom=8" title="Reise-Karte 3 â€” Norditalien" aria-label="Reise-Karte 3"></iframe>
                            </div>
                            <div class="card-content">
                                <h3 id="map3-title">September 2025</h3>
                                <p style="margin:0;color:var(--muted);">Routen und Orte im September 2025.</p>
                            </div>
                        </article>

                        <article class="card" role="group" aria-labelledby="map4-title">
                            <div style="padding:0;">
                                <iframe class="map-frame" src="map_4.html" title="Reise-Karte 4" aria-label="Reise-Karte 4"></iframe>
                            </div>
                            <div class="card-content">
                                <h3 id="map4-title">besuchte LÃ¤nder</h3>
                                <p style="margin:0;color:var(--muted);">Ãœbersicht der besuchten LÃ¤nder.</p>
                            </div>
                        </article>
                    </div>
                </div>
            </section>

            <section id="tab-news" class="tabpanel" role="tabpanel" aria-labelledby="tab-news-btn" hidden>
                <div class="tabpanel">
                    <h2 style="margin-top:0;margin-bottom:.5rem;font-size:1.05rem;">News</h2>
                    <div id="news-list" class="cards" aria-live="polite" style="margin-top:.6rem;">
                        <!-- News werden hier dynamisch aus assets/news.json geladen -->
                    </div>
                    <noscript style="color:var(--muted);">Bitte aktiviere JavaScript, um die aktuellen Meldungen zu sehen.</noscript>
                </div>
            </section>

            <section id="tab-projects" class="tabpanel" role="tabpanel" aria-labelledby="tab-projects-btn" hidden>
                <div class="tabpanel">
                    <h2 style="margin-top:0;margin-bottom:.5rem;font-size:1.05rem;">Projects</h2>
                    <p style="margin:0;color:var(--muted);">Aktuelle Projekte: â€”</p>
                </div>
            </section>

        </main>

        <footer>
            <p>&copy; Lars GrasmÃ¼ck</p>
        </footer>
    </div>

    <!-- Kontakt-Ecke (rechts unten) -->
    <div class="contact-cta" aria-hidden="false">
        <a class="contact-btn" href="https://www.linkedin.com/in/YOUR_PROFILE" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn" title="LinkedIn">
            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M4.98 3.5C4.98 4.88 3.86 6 2.48 6S0 4.88 0 3.5 1.12 1 2.5 1 4.98 2.12 4.98 3.5zM.22 8.98h4.52V24H.22V8.98zM9.94 8.98h4.34v2.04h.06c.6-1.14 2.06-2.34 4.24-2.34C23.22 8.68 24 11.02 24 14.9V24h-4.52v-8.6c0-2.05-.04-4.7-2.86-4.7-2.86 0-3.29 2.22-3.29 4.53V24H9.94V8.98z"/></svg>
        </a>

        <a class="contact-btn" href="https://github.com/YOUR_USERNAME" target="_blank" rel="noopener noreferrer" aria-label="GitHub" title="GitHub">
            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M12 .5C5.73.5.98 5.26.98 11.53c0 4.67 3.03 8.63 7.23 10.03.53.1.72-.23.72-.5 0-.25-.01-.92-.01-1.8-2.94.64-3.56-1.42-3.56-1.42-.48-1.22-1.17-1.55-1.17-1.55-.96-.66.07-.65.07-.65 1.06.08 1.62 1.09 1.62 1.09.94 1.62 2.47 1.15 3.07.88.09-.69.37-1.15.67-1.41-2.35-.27-4.82-1.18-4.82-5.24 0-1.16.41-2.11 1.09-2.85-.11-.27-.48-1.36.1-2.83 0 0 .88-.28 2.88 1.08.84-.23 1.74-.35 2.64-.35.9 0 1.8.12 2.64.35 2 1.36 2.88 1.08 2.88 1.08.58 1.47.21 2.56.1 2.83.68.74 1.09 1.69 1.09 2.85 0 4.06-2.47 4.97-4.82 5.24.38.32.72.95.72 1.91 0 1.38-.01 2.5-.01 2.83 0 .27.19.61.73.5 4.2-1.4 7.23-5.36 7.23-10.03C23.02 5.26 18.27.5 12 .5z"/></svg>
        </a>
    </div>

    <!-- Cesium JS (einmalig) -->
    <script src="https://cesium.com/downloads/cesiumjs/releases/1.125/Build/Cesium/Cesium.js"></script>
    <script>
    // Cesium initialisieren und 3D-Tiles laden (sicher, keine HTML-Kommentare)
    (function () {
        function initCesium() {
            if (typeof Cesium === 'undefined') { console.warn('Cesium not available'); return; }
            var el = document.getElementById('cesiumContainer');
            if (!el) return;

            try {
                window.cesiumViewer = new Cesium.Viewer('cesiumContainer', {
                    shadows: false,
                    geocoder: false,
                    baseLayerPicker: false,
                    infoBox: false,
                    selectionIndicator: false
                });

                // OSM als Basiskarte
                var osm = new Cesium.OpenStreetMapImageryProvider({ url: 'https://a.tile.openstreetmap.org/' });
                window.cesiumViewer.imageryLayers.addImageryProvider(osm);

                // zusÃ¤tzlicher WMS-Layer (de_basemapde_web_raster_farbe)
                var provider = new Cesium.WebMapServiceImageryProvider({
                    url: 'https://sgx.geodatenzentrum.de/wms_basemapde?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetCapabilities',
                    layers: 'de_basemapde_web_raster_farbe',
                    parameters: { transparent: true, format: 'image/png' }
                });
                window.cesiumViewer.imageryLayers.addImageryProvider(provider);

                // Kamera auf einen sinnvollen Ort fliegen
                window.cesiumViewer.camera.flyTo({
                    destination: Cesium.Cartesian3.fromDegrees(6.958215, 50.932767, 1500.0),
                    orientation: {
                        heading: Cesium.Math.toRadians(0.0),
                        pitch: Cesium.Math.toRadians(-50.0),
                        roll: 0.0
                    }
                });

                // 3D-Tileset laden (LoD2)
                (async function () {
                    try {
                        var tileset = await Cesium.Cesium3DTileset.fromUrl('https://sg.geodatenzentrum.de/gdz_basemapde_3d_gebaeude/lod2_4978_null.json');
                        window.cesiumViewer.scene.primitives.add(tileset);

                        var cityStyle = new Cesium.Cesium3DTileStyle({
                            color: {
                                conditions: [
                                    ["${surface} === 'wall'", "color('#f2f2f2')"],
                                    ["${surface} === 'roof'", "color('#ff5c4d')"],
                                    ["${surface} === 'bridge'", "color('#999999')"]
                                ]
                            }
                        });
                        tileset.style = cityStyle;
                    } catch (e) { console.error('3D tileset load failed', e); }
                })();

            } catch (e) {
                console.error('Cesium init failed', e);
            }
        }

        // Wenn die Maps-Tab sichtbar wird, evtl. Cesium initialisieren oder neu rendern
        document.addEventListener('DOMContentLoaded', function () {
            // Initiale Init (falls Maps sichtbar)
            initCesium();

            var mapsBtn = document.getElementById('tab-maps-btn');
            if (mapsBtn) {
                mapsBtn.addEventListener('click', function () {
                    // kleines Delay, damit Container sichtbar ist
                    setTimeout(function () {
                        try { if (window.cesiumViewer && window.cesiumViewer.resize) { window.cesiumViewer.resize(); window.cesiumViewer.scene.requestRender(); } else { initCesium(); } } catch (e) {}
                    }, 250);
                });
            }
        });
    })();

    // After Cesium init: ensure Cesium canvas does not steal clicks when Maps tab is not active.
    (function(){
        function setCesiumCanvasPointer(enabled){
            var c = document.querySelector('#cesiumContainer canvas');
            if(c) c.style.pointerEvents = enabled ? 'auto' : 'none';
        }

        document.addEventListener('DOMContentLoaded', function(){
            // Start with Cesium canvas non-interactive until Maps tab is activated
            setTimeout(function(){ setCesiumCanvasPointer(false); }, 300);

            // Toggle pointer-events based on which tab is clicked
            document.querySelectorAll('.tab').forEach(function(btn){
                btn.addEventListener('click', function(){
                    var isMaps = btn.id === 'tab-maps-btn';
                    // enable Cesium interaction only when Maps is active
                    setTimeout(function(){ setCesiumCanvasPointer(isMaps); }, 120);
                });
            });

            // Also when activating tabs via keyboard, listen for focus changes
            document.addEventListener('keydown', function(e){
                if(e.key === 'ArrowLeft' || e.key === 'ArrowRight' || e.key === 'Home' || e.key === 'End'){
                    // small delay to allow tab selection logic to run elsewhere
                    setTimeout(function(){
                        var active = document.querySelector('.tab[aria-selected="true"]');
                        var isMaps = active && active.id === 'tab-maps-btn';
                        setCesiumCanvasPointer(isMaps);
                    }, 60);
                }
            });
        });
    })();
    </script>
</body>
</html>